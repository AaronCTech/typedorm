# TypeDORM public API

This section contains information on all the public apis that are available within TypeDORM, this is likely to change to a live generated documentation, but until that is done, this can be used as a starting point.

_Note: In an event of inconstancy between actual API and this document, API should looked as the source of truth, and also file an issue in this repository or submit a PR._

## On this page

### Common

- [Table](#table)
- [Entity](#entity)
- [Attribute](#attribute)
- [AutoGeneratedAttribute](#autogeneratedattribute)

## Table

Declares table to be used to store entity, can be per entity based on single table per connection.

```Typescript
Table({
  // name of the table, must match exactly to what is provisioned on aws
  name

  // partition key of table
  partitionKey // identifier of partition key

  // sort key of table
  // @optional
  sortKey

  // indexes if there are any
  indexes
})
```

_Note: ATM This does not actually provision any dynamodb table in aws, but it is on the road map, until that is implemented use cloudformation or similar infrastructure as code tools to provision actual dynamodb tables._

## Entity

Declare an entity to be registered in TypeDORM domain

```Typescript
@Entity({
  // name of the entity that will be saved as __en attribute on each record
  name,

  // table where the entity be saved
  // @optional
  // required when no global table exits in connection
  table

  // primary key of entity, must adhere to table primary key
  primaryKey: {
    partitionKey
    // @optional
    // required if table uses composite primary key
    sortKey
  }

  // additional indexes to add to entity
  // @optional
  indexes
})
```

## Attribute

Declare Attribute on an entity

```Typescript
@Attribute({

  // @optional
  // can either be of type boolean or with primary key
  // when primary key is set to unique attribute, it can only reference it self
  // i.e `USER#{{email}}` on unique attribute named `email` is considered valid but not on `id`
  unique

  // @optional
  // required when attribute type is enum and referenced in key schema
  isEnum
})
```

## AutoGeneratedAttribute

Declare Auto generated attribute on an entity

```Typescript
@AutoGenerateAttribute({

  // strategy to use when auto generating attribute
  // valid values are of enum `AUTO_GENERATE_ATTRIBUTE_STRATEGY`
  strategy

  // @optional
  // when true, attribute will be auto updated on write request with specified strategy
  // useful for defining attributes like `updatedAt`
  autoUpdate
})
```
